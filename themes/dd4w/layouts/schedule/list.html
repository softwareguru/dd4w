{{ define "main" }}


<style>
  html, body, .hero { height: 63%; margin: 0; }
  
  .hero {
    display: grid;
    /* El grid tiene 2 columnas, una de 40% del ancho y otra con el resto */
    grid-template-columns: 0% 1fr;
      /* Solo hay un renglón, de altura flexible */
    grid-template-rows: 1fr;
    background-color: #927AFF;
    text-align: center;
  }
  
  .frame1 {
    /* el contenido del frame va centrado horizontalmente */
    justify-self: center; 
    
    /* y verticalmente alineado hacia abajo */
    align-self: end; 
  }
  
  .photo-container {
    /* 70% de la altura de pantalla. Ajustar al gusto y usar la misma altura para el texto blanco. */
    height: 70vh;
  }
  
  .photo {
    width: auto;
    height: 100%;
  }
  
  .frame2 {
    background-image: url("/images/degradados/agenda.png");
    background-size: cover;
    /* Para controlar el layout de este cuadro, volvemos a usar un grid. Es de 2 columnas x 2 renglones. La primer columna es un margen del 10% del ancho de pantalla, y la 2da columna es de ancho flexible, y es donde va el texto. De los renglones, el primer renglón tiene altura flexible mientras que el segundo es del 70% de la altura de la pantalla, este es el mismo valor que se usó para el cuadro con la foto de la chica. */
    display: grid;  
    grid-template-columns:  1vw 1fr;
    grid-template-rows: 1fr 20vh;
  }
  
  .info h1 {
    color: #ffffff;
   margin-top: 40px;
  }
  
  @media only screen and (max-width: 600px) { 
    /* En pantallas pequeñas esconder la foto
    y hacer que el frame izquierdo sea de solo 20% del ancho (en lugar del 40%) */
    .photo {
      display: none;
    }
    .hero {
      grid-template-columns: 0% 1fr;
    }
    .info h1 {
margin-top: 70px;
text-align: center;


}
  
    .frame2 {
      /* En pantalls pequeñas hay que ajustar el acomodo de la imagen de background para que no tape tanto. */
      background-position: bottom right;
      background-size: contain;
      background-repeat: no-repeat;
    }
  
  }
  
  
  </style>
  
  
  <section class="hero">
    <div class="frame1">
    </div>
    
    <div class="frame2">
      <!-- Tenemos un grid de 2x2. Nuestro contenido está en el 4to elemento (derecha inferior), así que necesitamos 3 elementos vacíos. -->
      <div class="spacer">
      </div>
      <div class="spacer">
    </div>
      <div class="spacer">
    </div>
    <div class="info">
      <h1>{{ .Title }}</h1>
    </div>
  
  </div>
  </section>
    <div class="container">
      <div class="content mt-4">
        {{ .Content }} 
    </div>  
   
      <div class="row">
          {{ range .Data.Pages }}
        <div class="col-12 col-md-4 px-3 mb-3">
          <div class="card h-100">

              <a href="#date-{{.Params.id}}">
                
                <img src="{{ .Params.Image }}" class="card-img-top" alt="..." width="200px" height="250px">
            
            <div class="card-body">
              <h3 class="card-title">{{ .Title }}</h3>     
            </a>    
              <h6 class="card-subtitle mb-4 text-muted">{{ .Params.Description }}</h6>
              </div>
            </div>
          </div>
          {{ end }}
        </div>
      </div>
    </div>
 


<div class="container">
    <div class="content my-4">
        El horario de las sesiones se despliega en tu horario local.

    </div>  

    {{ range .Params.blocks }}
    <div class="schedule-block">
        <h3><span id="date-{{ .id }}">{{ .time_start }}</span></h3>
        <div class="session-list">
            {{ range sort (where (where $.Site.Pages "Section" "sessions") ".Params.block" .id ) ".Params.time_end" }}
            <div class="session-item {{ with .Params.format }}{{ . }}{{end}}">
            <div class="">
                <div id="time-{{.Params.id}}" class="session-time">
                </div>
              </div>             
                <div class="session-info">
                    <h4><a class="session-title" data-toggle="collapse" href="#abs-{{.Params.id}}" style="color: white;">{{ .Params.title }}</a>{{ with .Params.language }}{{ if eq . "chinese" }} (Chinese){{ end }}{{ end }}</h4>
                    {{ with .Params.speakers }}<p class="speakers-list" style="color: white;">Por {{ delimit . ", " " & " }}</p>{{ end }}
                    <div class="collapse card-abstract" id="abs-{{.Params.id}}" style="color: white;">
                      {{ .Summary }}
                        <div><a href="{{.Permalink}}" style="color: white;">Leer más ...</a></div>
                </div>
            </div>
          </div>
          
            {{ end }}
            <br>
        </div>
    </div>
    {{ end }}
</div>

<script>
  function adjTime(elemId, timeStart, timeEnd, timeBlock) {
      let dateStart = new Date(Date.parse(timeStart));
      let dateEnd = new Date(Date.parse(timeEnd));
      let dateBlock = new Date(Date.parse(timeBlock));
      let adjString = dateStart.getHours()+":"+(('0'+dateStart.getMinutes()).slice(-2))+"-"+dateEnd.getHours()+":"+(('0'+dateEnd.getMinutes()).slice(-2));
      if (dateStart.getDay() > dateBlock.getDay()) {
        adjString += "<br /><em>(+1 day)</em>";
      }  
      document.getElementById(elemId).innerHTML=adjString;
  }
  function adjBlock(elemId, date1, language) {
      let parseDate1 = Date.parse(date1);
      let jsDate1 = new Date(parseDate1);
      var days = ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'];
      let adjString = days[jsDate1.getDay()]+", Octubre "+jsDate1.getDate()+"";
      document.getElementById(elemId).innerHTML=adjString;
  }
      {{ range .Params.blocks }}
    {{ $block_start := .time_start | time  }}
    adjBlock("date-{{ .id }}", "{{ $block_start.Format "02 Jan 2006 15:04:05 MST" }}", "{{ humanize .language }}");
    {{ range sort (where (where $.Site.Pages "Section" "sessions") ".Params.block" .id ) ".Params.time_start" }}
      {{ $time_start := .Params.time_start | time  }}
      {{ $time_end := .Params.time_end | time  }}
      adjTime("time-{{ .Params.id }}", "{{ $time_start.Format "02 Jan 2006 15:04:05 MST" }}", "{{ $time_end.Format "02 Jan 2006 15:04:05 MST" }}", "{{ $block_start.Format "02 Jan 2006 15:04:05 MST" }}");
    {{ end }}  
  {{ end }}

</script>

{{ end }}





